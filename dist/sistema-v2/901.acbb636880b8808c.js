"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[901],{9901:(ft,x,n)=>{n.r(x),n.d(x,{AsignaturesModule:()=>dt});var l=n(6895),g=n(2510),o=n(4006),U=n(8288),_=n(7579),M=n(4813),m=n(2722),t=n(4650),Z=n(4752),b=n(4031),S=n(6033),T=n(2494),d=n(9549),h=n(4144),f=n(4859);function J(e,s){if(1&e&&(t.TgZ(0,"fuse-alert",18),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.Q6J("appearance","outline")("showIcon",!1)("type",a.alert.type)("@shake","error"===a.alert.type),t.xp6(1),t.hij(" ",a.alert.message," ")}}function N(e,s){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Este campo es obligatorio"),t.qZA())}function D(e,s){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const a=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.asignaturaForm.get("name").errors[a]," ")}}function Y(e,s){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,D,2,1,"ng-container",12),t.qZA()),2&e){const a=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.asignaturaForm.get("name").hasError(a))}}function L(e,s){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const a=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.asignaturaForm.get("description").errors[a]," ")}}function Q(e,s){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,L,2,1,"ng-container",12),t.qZA()),2&e){const a=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.asignaturaForm.get("description").hasError(a))}}let C=(()=>{class e{constructor(a,i,r,c,p,pt){this._formBuilder=a,this._asignaturesService=i,this._activatedRoute=r,this._router=c,this._globalService=p,this._countriesService=pt,this._unsubscribeAll=new _.x,this.alert={type:"success",message:""},this.showAlert=!1,this.mode="crear",this.countries$=this._countriesService.getCountries().pipe((0,M.j)("data"))}ngOnInit(){this.asignaturaForm=this._formBuilder.group({name:["",o.kI.required],description:[""]}),this._activatedRoute.params.pipe((0,m.R)(this._unsubscribeAll)).subscribe(a=>{a.id&&(this.mode="editar",this.id=a.id,this.getAsignature(this.id))})}getAsignature(a){this._asignaturesService.get(a).pipe((0,m.R)(this._unsubscribeAll)).subscribe(i=>{this.asignaturaForm.patchValue(i.data),this.asignaturaForm.get("country_id").setValue(i.data.country.id)})}saveAsignatura(){this.asignaturaForm.invalid?this.asignaturaForm.markAllAsTouched():(this.asignaturaForm.disable(),this.asignaturaForm.updateValueAndValidity(),this.showAlert=!1,this._asignaturesService.create(this.asignaturaForm.value).pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this.asignaturaForm.enable(),this._router.navigate(["/asignaturas/lista",{m:1}])},a=>{this.asignaturaForm.enable(),a.message===this._globalService.httpValidationErrorMessage&&(this.asignaturaForm=this._globalService.getValidationErrors(this.asignaturaForm,a),this.alert={type:"error",message:`${a.message}`},this.showAlert=!0)}))}gestionarAsignatura(){"crear"===this.mode?this.saveAsignatura():this.updateAsignatura()}updateAsignatura(){this.asignaturaForm.markAllAsTouched(),!this.asignaturaForm.invalid&&(this.asignaturaForm.disable(),this.showAlert=!1,this._asignaturesService.update(this.asignaturaForm.value,this.id).pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this.asignaturaForm.enable(),this._router.navigate(["/asignaturas/lista",{m:2}])},a=>{this.asignaturaForm.enable(),a.message===this._globalService.httpValidationErrorMessage&&(this.asignaturaForm=this._globalService.getValidationErrors(this.asignaturaForm,a),this.alert={type:"error",message:`${a.message}`},this.showAlert=!0)}))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(o.qu),t.Y36(Z.P),t.Y36(g.gz),t.Y36(g.F0),t.Y36(b.U),t.Y36(S.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-manage-asignature"]],decls:29,vars:6,consts:[[1,"w-full","max-w-3xl","m-auto"],[1,"grid","sm:grid-cols-2","gap-8","w-full","mb-8"],[1,"w-full","col-span-1"],[1,"text-3xl","font-bold"],[1,"text-secondary"],[1,"col-span-1","relative"],[1,"absolute","-translate-y-2/4","top-2/4","left-0","right-0"],[3,"appearance","showIcon","type",4,"ngIf"],[1,"grid","sm:grid-cols-2","gap-y-1","gap-x-5","w-full","mt-8",3,"formGroup"],[1,"col-span-2"],[1,"w-full"],["id","name","type","text","formControlName","name","matInput",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["id","description","type","text","formControlName","description","matInput",""],[1,"mt-11","mb-10","border-t"],[1,"flex","items-center","justify-end"],["mat-flat-button","","type","button",1,"ml-4",3,"color","click"],[3,"appearance","showIcon","type"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"form")(2,"div",1)(3,"div",2)(4,"div",3),t._uU(5,"Crear Asignatura"),t.qZA(),t.TgZ(6,"div",4),t._uU(7,"Ingresa la informacion para crear un asignatura"),t.qZA()(),t.TgZ(8,"div",5)(9,"div",6),t.YNc(10,J,2,5,"fuse-alert",7),t.qZA()()(),t.TgZ(11,"div",8)(12,"div",9)(13,"mat-form-field",10)(14,"mat-label"),t._uU(15,"Nombre"),t.qZA(),t._UZ(16,"input",11),t.YNc(17,N,2,0,"mat-error",12),t.YNc(18,Y,2,1,"mat-error",13),t.qZA()(),t.TgZ(19,"div",9)(20,"mat-form-field",10)(21,"mat-label"),t._uU(22,"Descripci\xf3n"),t.qZA(),t._UZ(23,"input",14),t.YNc(24,Q,2,1,"mat-error",13),t.qZA()()(),t._UZ(25,"div",15),t.TgZ(26,"div",16)(27,"button",17),t.NdJ("click",function(){return i.gestionarAsignatura()}),t._uU(28,"Guardar "),t.qZA()()()()),2&a&&(t.xp6(10),t.Q6J("ngIf",i.showAlert),t.xp6(1),t.Q6J("formGroup",i.asignaturaForm),t.xp6(6),t.Q6J("ngIf",i.asignaturaForm.get("name").hasError("required")),t.xp6(1),t.Q6J("ngForOf",i._globalService.errorsLength(i.asignaturaForm.get("name"))),t.xp6(6),t.Q6J("ngForOf",i._globalService.errorsLength(i.asignaturaForm.get("description"))),t.xp6(3),t.Q6J("color","primary"))},dependencies:[l.sg,l.O5,T.W,d.TO,d.KE,d.hX,h.Nt,o._Y,o.Fj,o.JJ,o.JL,o.F,o.sg,o.u,f.lW],data:{animation:U.L}}),e})();var u=n(7155),I=n(8372),R=n(1884),y=n(8739),A=n(3267),v=n(7392);const j=["drawer"];let z=(()=>{class e{constructor(a){this._location=a,this.asignature={}}ngOnInit(){}cerrarDetalles(){this._location.replaceState("/asignaturas/lista"),this.drawer.toggle()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(l.Ye))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-asignature-details"]],viewQuery:function(a,i){if(1&a&&t.Gf(j,7),2&a){let r;t.iGM(r=t.CRH())&&(i.drawer=r.first)}},decls:23,vars:2,consts:[["mode","side",1,"fixed",3,"position"],["drawer",""],[1,"px-7","py-5"],[1,"header"],[1,"grid","grid-cols-12","items-baseline"],[1,"col-span-10"],[1,"text-2xl","font-bold","trncate"],[1,"col-span-2"],[1,"w-fit","ml-auto"],["mat-button","",1,"bg-transparent","h-3","w-3","min-w-0",3,"click"],[1,"text-xl"],[1,"my-3"],[1,"detalles-institucion"],[1,"info"],[1,"mt-3","font-bold","text-sm","trncate"],[1,"text-base","trncate"]],template:function(a,i){1&a&&(t.TgZ(0,"mat-drawer",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),t._uU(7,"Detalles del nivel"),t.qZA()(),t.TgZ(8,"div",7)(9,"div",8)(10,"button",9),t.NdJ("click",function(){return i.cerrarDetalles()}),t.TgZ(11,"mat-icon",10),t._uU(12,"close"),t.qZA()()()()()(),t._UZ(13,"hr",11),t.TgZ(14,"div",12)(15,"div",13)(16,"div",14),t._uU(17,"Nombre"),t.qZA(),t.TgZ(18,"div",15),t._uU(19),t.qZA()(),t.TgZ(20,"div",13)(21,"div",14),t._uU(22,"Descripci\xf3n"),t.qZA()()()()()),2&a&&(t.Q6J("position","end"),t.xp6(19),t.Oqu(i.asignature.name))},dependencies:[A.jA,v.Hw,f.lW],styles:[".mat-drawer[_ngcontent-%COMP%]{width:400px;height:100%;box-shadow:-10px 0 50px 1px #9fa2aa91;background-color:#efefef!important}"]}),e})();const B=["sidenav"];function E(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1,"creada"),t.qZA())}function O(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1,"actualizada"),t.qZA())}function q(e,s){if(1&e&&(t.TgZ(0,"fuse-alert",27)(1,"span",28),t._uU(2,"Exito"),t.qZA(),t._uU(3," El asignatura ha sido "),t.YNc(4,E,2,0,"span",29),t.YNc(5,O,2,0,"span",29),t._uU(6," exitosamente "),t.qZA()),2&e){const a=t.oxw();t.Q6J("type","success"),t.xp6(4),t.Q6J("ngIf","1"===a.m),t.xp6(1),t.Q6J("ngIf","2"===a.m)}}function P(e,s){1&e&&(t.TgZ(0,"th",30),t._uU(1,"Nombre"),t.qZA())}function $(e,s){if(1&e&&(t.TgZ(0,"td",31)(1,"span",32),t._uU(2),t.qZA()()),2&e){const a=s.$implicit;t.xp6(2),t.hij(" ",a.id," ")}}function G(e,s){1&e&&(t.TgZ(0,"th",30),t._uU(1,"Nombre"),t.qZA())}function H(e,s){if(1&e&&(t.TgZ(0,"td",31)(1,"span",32),t._uU(2),t.qZA()()),2&e){const a=s.$implicit;t.xp6(2),t.hij(" ",a.name," ")}}function k(e,s){1&e&&(t.TgZ(0,"th",30),t._uU(1,"Descripci\xf3n"),t.qZA())}function X(e,s){if(1&e&&(t.TgZ(0,"td",31)(1,"span",32),t._uU(2),t.qZA()()),2&e){const a=s.$implicit;t.xp6(2),t.hij(" ",a.description||"-"," ")}}function V(e,s){1&e&&(t.TgZ(0,"th",30),t._uU(1,"Acciones"),t.qZA())}function W(e,s){if(1&e){const a=t.EpF();t.TgZ(0,"td",31)(1,"button",33),t.NdJ("click",function(){const c=t.CHM(a).$implicit,p=t.oxw();return t.KtG(p.editAsignature(c.id))}),t._uU(2,"Editar"),t.qZA()()}}function K(e,s){1&e&&t._UZ(0,"tr",34)}function tt(e,s){if(1&e){const a=t.EpF();t.TgZ(0,"tr",35),t.NdJ("click",function(){const c=t.CHM(a).$implicit,p=t.oxw();return t.KtG(p.showAsignatureDetails(c))}),t.qZA()}}const et=function(){return[10,25,100]};let F=(()=>{class e{constructor(a,i,r,c,p){this._asignaturesService=a,this._router=i,this._activatedRoute=r,this._globalService=c,this._location=p,this.columns=["id","name","description","acciones"],this.m=null,this._unsubscribeAll=new _.x,this.resendingEmail=!1,this.search=new o.NI}ngOnInit(){this._activatedRoute.params.subscribe(a=>{a.id&&this._asignaturesService.get(a.id).subscribe(i=>{this.showAsignatureDetails(i.data)})}),this.getAsignatures(),this._activatedRoute.params.pipe((0,m.R)(this._unsubscribeAll)).subscribe(a=>{a.m&&(this.m=a.m)}),this.search.valueChanges.pipe((0,m.R)(this._unsubscribeAll),(0,I.b)(500),(0,R.x)()).subscribe(a=>{this.getAsignatures({page:1,perPage:10},a)})}getAsignatures(a,i=""){this._asignaturesService.getList(a,i).pipe((0,m.R)(this._unsubscribeAll)).subscribe(r=>{this.asignaturesPaginated=r.data,this.dataSource=new u.by(this.asignaturesPaginated.data)})}editAsignature(a){this._router.navigate(["asignaturas/editar",a])}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}paginate(a){this.getAsignatures({page:a.pageIndex+1,perPage:a.pageSize})}showAsignatureDetails(a){this.sidenav.asignature=a,this.sidenav.drawer.toggle(),this._location.replaceState(this.sidenav.drawer.opened?"/asignaturas/detalles/"+a.id:"/asignaturas/lista")}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(Z.P),t.Y36(g.F0),t.Y36(g.gz),t.Y36(b.U),t.Y36(l.Ye))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-asignatures-list"]],viewQuery:function(a,i){if(1&a&&t.Gf(B,7),2&a){let r;t.iGM(r=t.CRH())&&(i.sidenav=r.first)}},decls:43,vars:10,consts:[["autosize","",1,"w-full"],[1,"grid","sm:grid-cols-2","gap-8","w-full","mb-6"],[1,"w-full","col-span-1"],[1,"text-3xl","font-bold"],[1,"text-secondary"],[1,"text-right"],["mat-stroked-button","",1,"rounded","mr-1","px-3","bg-primary-300","text-on-primary-300",3,"routerLink"],[3,"type",4,"ngIf"],[1,"sm:col-span-6","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"grid","grid-cols-2"],[1,"col-span-1"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"w-72","ml-auto"],[1,"w-72"],["matInput","",3,"formControl"],[1,"flex","flex-col","flex-auto","mt-2","overflow-x-auto"],["mat-table","",1,"min-w-240","overflow-y-visible",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["class","cursor-pointer","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions","page"],["sidenav",""],[3,"type"],["fuseAlertTitle",""],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"font-medium","text-right"],["mat-stroked-button","",1,"rounded","mr-1","p-0","bg-primary-300","text-on-primary-300",3,"click"],["mat-header-row",""],["mat-row","",1,"cursor-pointer",3,"click"]],template:function(a,i){1&a&&(t.TgZ(0,"mat-drawer-container",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"Asignaturas"),t.qZA(),t.TgZ(5,"div",4),t._uU(6,"Una lista de asignaturas registradas en el sistema"),t.qZA()(),t.TgZ(7,"div",2)(8,"div",5)(9,"button",6),t._uU(10,"Crear Asignatura"),t.qZA()()(),t.TgZ(11,"div",2),t.YNc(12,q,7,3,"fuse-alert",7),t.qZA()(),t.TgZ(13,"div",8)(14,"div",9)(15,"div",10)(16,"div",11),t._uU(17,"Detalles de asignaturas"),t.qZA()(),t.TgZ(18,"div",10)(19,"div",12)(20,"mat-form-field",13)(21,"mat-label"),t._uU(22,"Buscar Asignatura"),t.qZA(),t._UZ(23,"input",14),t.qZA()()()(),t.TgZ(24,"div",15)(25,"table",16),t.ynx(26,17),t.YNc(27,P,2,0,"th",18),t.YNc(28,$,3,1,"td",19),t.BQk(),t.ynx(29,20),t.YNc(30,G,2,0,"th",18),t.YNc(31,H,3,1,"td",19),t.BQk(),t.ynx(32,21),t.YNc(33,k,2,0,"th",18),t.YNc(34,X,3,1,"td",19),t.BQk(),t.ynx(35,22),t.YNc(36,V,2,0,"th",18),t.YNc(37,W,3,0,"td",19),t.BQk(),t.YNc(38,K,1,0,"tr",23),t.YNc(39,tt,1,0,"tr",24),t.qZA(),t.TgZ(40,"mat-paginator",25),t.NdJ("page",function(c){return i.paginate(c)}),t.qZA()()(),t._UZ(41,"app-asignature-details",null,26),t.qZA()),2&a&&(t.xp6(9),t.Q6J("routerLink","/asignaturas/crear"),t.xp6(3),t.Q6J("ngIf",i.m),t.xp6(11),t.Q6J("formControl",i.search),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",i.columns),t.xp6(1),t.Q6J("matRowDefColumns",i.columns),t.xp6(1),t.Q6J("length",null==i.asignaturesPaginated?null:i.asignaturesPaginated.total)("pageSize",null==i.asignaturesPaginated?null:i.asignaturesPaginated.per_page)("pageSizeOptions",t.DdM(9,et)))},dependencies:[l.O5,g.rH,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,y.NW,f.lW,T.W,z,A.kh,d.KE,d.hX,h.Nt,o.Fj,o.JJ,o.oH]}),e})();const at=[{path:"lista",component:F},{path:"crear",component:C},{path:"editar/:id",component:C},{path:"detalles/:id",component:F},{path:"",pathMatch:"full",redirectTo:"lista"}];var w=n(7775),it=n(4385),st=n(9602),nt=n(3238);let rt=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.ez,w.fC,d.lN,h.c,it.LD,o.u5,o.UX,v.Ps,f.ot,st.FA,nt.XK]}),e})();var ot=n(7009),ut=n(4466),lt=n(7084),ct=n(252);let gt=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.ez,A.SJ,lt.To,v.Ps,f.ot,ct.o]}),e})(),mt=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.ez,g.Bz,u.p0,y.TU,f.ot,ot.ZX,w.fC,gt,A.SJ,d.lN,h.c,ut.m]}),e})(),dt=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.ez,g.Bz.forChild(at),rt,mt]}),e})()}}]);