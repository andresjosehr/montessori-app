"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[257],{5257:(xe,N,s)=>{s.r(N),s.d(N,{StudentsModule:()=>ye});var g=s(6895),d=s(2510),u=s(7155),P=s(7579),w=s(2722),t=s(4650),v=s(529),c=s(2340);let C=(()=>{class n{constructor(e){this._httpClient=e}getList(e,o){const i=new v.LE({fromObject:{...o,...e}});return this._httpClient.get(`${c.N.api}/students`,{params:i})}getAll(e){const o=new v.LE({fromObject:{...e}});return this._httpClient.get(`${c.N.api}/students/get-all`,{params:o})}get(e){return this._httpClient.get(`${c.N.api}/students/${e}`)}uploadFile(e){const o=new FormData;o.append("file",e,e.name);const i=new v.WM;return i.append("Content-Type","multipart/form-data"),i.append("Accept","application/json"),this._httpClient.post(`${c.N.api}/students/upload-file`,o,{headers:i})}create(e){const o=new FormData;for(const r in e)e.hasOwnProperty(r)&&"img"!==r&&"broker_logo"!==r&&o.append(r,e[r]);const i=new v.WM;return i.append("Content-Type","multipart/form-data"),i.append("Accept","application/json"),this._httpClient.post(`${c.N.api}/students`,o,{headers:i})}update(e,o){const i=new FormData;for(const l in o)o.hasOwnProperty(l)&&"img"!==l&&"broker_logo"!==l&&i.append(l,o[l]);const r=new v.WM;return r.append("Content-Type","multipart/form-data"),r.append("Accept","application/json"),r.append("_method","PUT"),this._httpClient.post(`${c.N.api}/students/${e}?_method=PUT`,i,{headers:r})}getPropertyEntities(){return this._httpClient.get(`${c.N.api}/students/get-property-entities`)}completeSignUp(e,o){return this._httpClient.post(`${c.N.api}/students/complete-signup/${o}`,e)}resendSignUpEmail(e){return this._httpClient.get(`${c.N.api}/students/resend-signup-email/${e}`,{})}getAllLevels(){return this._httpClient.get(`${c.N.api}/get-all-levels`)}registerPayment(e,o){return this._httpClient.post(`${c.N.api}/students/register-payment/${e}`,o)}registerEnrollmentPayment(e,o){return this._httpClient.post(`${c.N.api}/students/register-enrollment-payment/${e}`,o)}getEnrollmentPayments(e){return this._httpClient.get(`${c.N.api}/students/get-enrollment-payment/${e}`)}getPayments(e,o){return this._httpClient.get(`${c.N.api}/students/payment-control/${e}/${o}`)}delete(e){return this._httpClient.delete(`${c.N.api}/students/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(v.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var m=s(4006),x=s(4031),J=s(1683),Z=s(4859),_=s(9549),f=s(4144),Y=s(2494),b=s(8739),T=s(7392);function V(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"creado"),t.qZA())}function B(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"actualizado"),t.qZA())}function L(n,a){if(1&n&&(t.TgZ(0,"fuse-alert",33)(1,"span",34),t._uU(2,"Exito"),t.qZA(),t._uU(3," El alumno ha sido "),t.YNc(4,V,2,0,"span",35),t.YNc(5,B,2,0,"span",35),t._uU(6," exitosamente "),t.qZA()),2&n){const e=t.oxw();t.Q6J("type","success"),t.xp6(4),t.Q6J("ngIf","1"===e.m),t.xp6(1),t.Q6J("ngIf","2"===e.m)}}function k(n,a){1&n&&(t.TgZ(0,"th",36),t._uU(1,"ID"),t.qZA())}function O(n,a){if(1&n&&(t.TgZ(0,"td",37)(1,"span",38),t._uU(2),t.qZA()()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",e.id," ")}}function $(n,a){1&n&&(t.TgZ(0,"th",36),t._uU(1,"Nombres"),t.qZA())}function R(n,a){if(1&n&&(t.TgZ(0,"td",37)(1,"span",38),t._uU(2),t.qZA()()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",e.name," ")}}function j(n,a){1&n&&(t.TgZ(0,"th",36),t._uU(1,"Apellidos"),t.qZA())}function z(n,a){if(1&n&&(t.TgZ(0,"td",37)(1,"span",38),t._uU(2),t.qZA()()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",e.last_name," ")}}function H(n,a){1&n&&(t.TgZ(0,"th",36),t._uU(1,"Representante"),t.qZA())}function X(n,a){if(1&n&&(t.TgZ(0,"td",37)(1,"span",38),t._uU(2),t.qZA()()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",e.representative_name||"-"," ")}}function K(n,a){1&n&&(t.TgZ(0,"th",36),t._uU(1,"Numero representante"),t.qZA())}function W(n,a){if(1&n&&(t.TgZ(0,"td",37)(1,"span",38),t._uU(2),t.qZA()()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",e.representative_phone||"-"," ")}}function tt(n,a){1&n&&(t.TgZ(0,"th",36),t._uU(1,"Grado"),t.qZA())}function et(n,a){if(1&n&&(t.TgZ(0,"td",37)(1,"span",38),t._uU(2),t.qZA()()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",e.level.name||"-"," ")}}function nt(n,a){1&n&&(t.TgZ(0,"th",36),t._uU(1,"Acciones"),t.qZA())}function ot(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",37)(1,"div",39)(2,"div",40)(3,"button",41),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.goToStudent(r.id))}),t.TgZ(4,"mat-icon"),t._uU(5,"edit"),t.qZA()()(),t.TgZ(6,"div",40)(7,"button",42),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.goToPaymentControl(r.id))}),t.TgZ(8,"mat-icon"),t._uU(9," attach_money"),t.qZA()()(),t.TgZ(10,"div",40)(11,"button",43),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.deleteStudent(r.id))}),t.TgZ(12,"mat-icon"),t._uU(13," delete"),t.qZA()()()()()}}function at(n,a){1&n&&t._UZ(0,"tr",44)}function it(n,a){1&n&&t._UZ(0,"tr",45)}const rt=function(){return[10,25,100]};let lt=(()=>{class n{constructor(e,o,i,r,l,p){this._studentsService=e,this._activatedRoute=o,this._router=i,this._formBuilder=r,this._globalService=l,this._fuseConfirmationService=p,this.columns=["id","name","last_name","representative_name","representative_phone","Grado","acciones"],this.m=null,this._unsubscribeAll=new P.x}paginate(e){this.getStudents(this.getValues(),{page:e.pageIndex+1,perPage:e.pageSize})}ngOnInit(){this.seachFormGroup=this._formBuilder.group({file:[null],city:[null],company:[null],profession:[null],fileSelect:["Seleccionar"],citySelect:["Seleccionar"],companySelect:["Seleccionar"],professionSelect:["Seleccionar"]}),this._activatedRoute.params.pipe((0,w.R)(this._unsubscribeAll)).subscribe(e=>{e.m&&(this.m=e.m)}),this.getStudents({})}getStudents(e,o={page:1,perPage:10}){this._studentsService.getList(e,o).subscribe(i=>{this.dataSource=new u.by(i.data.data),this.studentsPaginated=i.data})}filter(e,o){const i=e.toLowerCase();return o.filter(r=>(r||"").toLowerCase().includes(i))}fileChange(e){this.file=e}goToStudent(e){this._router.navigate(["alumnos","editar",e])}goToPaymentControl(e){this._router.navigate(["alumnos","control-de-pago",e])}uploadFile(){this._studentsService.uploadFile(this.file).subscribe(e=>{console.log(e)})}filterStudents(){console.log(this.getValues()),this.getStudents(this.getValues())}getValues(){const e={};return this.seachFormGroup.value.fileSelect&&"Seleccionar"!==this.seachFormGroup.value.fileSelect&&(e.file=this.seachFormGroup.value.fileSelect),this.seachFormGroup.value.citySelect&&"Seleccionar"!==this.seachFormGroup.value.citySelect&&(e.city=this.seachFormGroup.value.citySelect),this.seachFormGroup.value.companySelect&&"Seleccionar"!==this.seachFormGroup.value.companySelect&&(e.company=this.seachFormGroup.value.companySelect),this.seachFormGroup.value.professionSelect&&"Seleccionar"!==this.seachFormGroup.value.professionSelect&&(e.profession=this.seachFormGroup.value.professionSelect),e}export(){this._studentsService.getAll(this.getValues()).subscribe(e=>{this._globalService.saveDataAsCSV(e.data,"studentos")})}resendSignUpEmail(e){this._studentsService.resendSignUpEmail(e).subscribe(o=>{this._globalService.openSnackBar("Correo enviado",5e3,"success"),console.log(o)})}deleteStudent(e){this._fuseConfirmationService.open({title:"Atenci\xf3n",message:"\xbfEst\xe1 seguro que desea eliminar este alumno? La informaci\xf3n de pagos tambi\xe9n se eliminar\xe1. Esta acci\xf3n no se puede deshacer.",icon:{show:!0,name:"heroicons_outline:exclamation",color:"warning"},actions:{confirm:{show:!0,label:"Confirmar",color:"accent"},cancel:{show:!0,label:"Cancelar"}},dismissible:!0}).afterClosed().subscribe(i=>{"confirmed"===i&&this._studentsService.delete(e).subscribe(r=>{this._globalService.openSnackBar("Alumno eliminado",5e3,"success"),this.dataSource.data=this.dataSource.data.filter(l=>l.id!==e)})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C),t.Y36(d.gz),t.Y36(d.F0),t.Y36(m.qu),t.Y36(x.U),t.Y36(J.R))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-students-list"]],decls:55,vars:10,consts:[[1,"w-full"],[1,"grid","sm:grid-cols-2","gap-8","w-full","mb-6"],[1,"w-full","col-span-1"],[1,"text-3xl","font-bold"],[1,"text-secondary"],[1,"text-right"],["mat-stroked-button","",1,"rounded","mr-1","px-3","bg-primary-300","text-on-primary-300",3,"routerLink"],[3,"type",4,"ngIf"],[1,"sm:col-span-6","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"grid","grid-cols-12"],[1,"col-span-3"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"col-span-9"],[1,"flex","gap-3","justify-end",3,"formGroup"],[1,"w-2/5"],["type","text","matInput",""],[1,"w-1/5"],[1,"flex","mt-7","gap-1"],["mat-stroked-button","",1,"rounded","w-full","p-0","bg-primary-300","text-on-primary-300",3,"click"],[1,"flex","flex-col","flex-auto","mt-2","overflow-x-auto"],["mat-table","",1,"min-w-240","overflow-y-visible",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","last_name"],["matColumnDef","representative_name"],["matColumnDef","representative_phone"],["matColumnDef","Grado"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["class","cursor-pointer","mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions","page"],[3,"type"],["fuseAlertTitle",""],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"font-medium"],[1,"flex","gap-2"],[1,"1/2"],["mat-mini-fab","",1,"rounded","bg-primary-300","text-on-primary-300",3,"click"],["mat-mini-fab","",1,"rounded","bg-green-300","text-green-800",3,"click"],["mat-mini-fab","",1,"rounded","bg-red-300","text-red-800",3,"click"],["mat-header-row",""],["mat-row","",1,"cursor-pointer"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"Alumnos"),t.qZA(),t.TgZ(5,"div",4),t._uU(6,"Una lista de alumnos registradas en el sistema"),t.qZA()(),t.TgZ(7,"div",2)(8,"div",5)(9,"button",6),t._uU(10,"Crear Alumno"),t.qZA()()(),t.TgZ(11,"div",2),t.YNc(12,L,7,3,"fuse-alert",7),t.qZA()(),t.TgZ(13,"div",8)(14,"div",9)(15,"div",10)(16,"div",11),t._uU(17,"Detalles de alumno"),t.qZA()(),t.TgZ(18,"div",12)(19,"div",13)(20,"div",14)(21,"mat-form-field",0)(22,"mat-label"),t._uU(23,"Buscar Alumno"),t.qZA(),t._UZ(24,"input",15),t.qZA()(),t.TgZ(25,"div",16)(26,"div",17)(27,"button",18),t.NdJ("click",function(){return o.filterStudents()}),t._uU(28,"Buscar"),t.qZA()()()()()(),t.TgZ(29,"div",19)(30,"table",20),t.ynx(31,21),t.YNc(32,k,2,0,"th",22),t.YNc(33,O,3,1,"td",23),t.BQk(),t.ynx(34,24),t.YNc(35,$,2,0,"th",22),t.YNc(36,R,3,1,"td",23),t.BQk(),t.ynx(37,25),t.YNc(38,j,2,0,"th",22),t.YNc(39,z,3,1,"td",23),t.BQk(),t.ynx(40,26),t.YNc(41,H,2,0,"th",22),t.YNc(42,X,3,1,"td",23),t.BQk(),t.ynx(43,27),t.YNc(44,K,2,0,"th",22),t.YNc(45,W,3,1,"td",23),t.BQk(),t.ynx(46,28),t.YNc(47,tt,2,0,"th",22),t.YNc(48,et,3,1,"td",23),t.BQk(),t.ynx(49,29),t.YNc(50,nt,2,0,"th",22),t.YNc(51,ot,14,0,"td",23),t.BQk(),t.YNc(52,at,1,0,"tr",30),t.YNc(53,it,1,0,"tr",31),t.qZA(),t.TgZ(54,"mat-paginator",32),t.NdJ("page",function(r){return o.paginate(r)}),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("routerLink","/alumnos/crear"),t.xp6(3),t.Q6J("ngIf",o.m),t.xp6(7),t.Q6J("formGroup",o.seachFormGroup),t.xp6(11),t.Q6J("dataSource",o.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",o.columns),t.xp6(1),t.Q6J("matRowDefColumns",o.columns),t.xp6(1),t.Q6J("length",null==o.studentsPaginated?null:o.studentsPaginated.total)("pageSize",null==o.studentsPaginated?null:o.studentsPaginated.per_page)("pageSizeOptions",t.DdM(9,rt)))},dependencies:[g.O5,Z.lW,_.KE,_.hX,m.JL,m.sg,d.rH,f.Nt,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,Y.W,b.NW,T.Hw]}),n})();var st=s(6466),y=s(4385),A=s(3238);function mt(n,a){if(1&n&&(t.TgZ(0,"fuse-alert",24),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.Q6J("appearance","outline")("showIcon",!1)("type",e.alert.type)("@shake","error"===e.alert.type),t.xp6(1),t.hij(" ",e.alert.message," ")}}function ut(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Este campo es obligatorio"),t.qZA())}function pt(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Este campo es obligatorio"),t.qZA())}function ct(n,a){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.hij(" ",o.studentForm.get("name").errors[e]," ")}}function dt(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t.YNc(1,ct,2,1,"ng-container",13),t.qZA()),2&n){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.studentForm.get("code").hasError(e))}}function _t(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Este campo es obligatorio"),t.qZA())}function gt(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Este campo es obligatorio"),t.qZA())}function ft(n,a){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.hij(" ",o.studentForm.get("last_name").errors[e]," ")}}function ht(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t.YNc(1,ft,2,1,"ng-container",13),t.qZA()),2&n){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.studentForm.get("code").hasError(e))}}function vt(n,a){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.hij(" ",o.studentForm.get("representative_name").errors[e]," ")}}function Zt(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t.YNc(1,vt,2,1,"ng-container",13),t.qZA()),2&n){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.studentForm.get("representative_name").hasError(e))}}function yt(n,a){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.hij(" ",o.studentForm.get("representative_phone").errors[e]," ")}}function Ct(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t.YNc(1,yt,2,1,"ng-container",13),t.qZA()),2&n){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.studentForm.get("representative_phone").hasError(e))}}function xt(n,a){if(1&n&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function Tt(n,a){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.hij(" ",o.studentForm.get("level_id").errors[e]," ")}}function bt(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t.YNc(1,Tt,2,1,"ng-container",13),t.qZA()),2&n){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.studentForm.get("level_id").hasError(e))}}let D=(()=>{class n{constructor(e,o,i,r,l,p){this._globalService=e,this._activateRoute=o,this._formBuilder=i,this._router=r,this._studentsService=l,this._entityPropertiesService=p,this.alert={type:"success",message:""},this.showAlert=!1,this.studentID=""}ngOnInit(){this.initForm(),this._activateRoute.params.subscribe(e=>{e.id&&(this.studentID=e.id,this.getStudent())}),this.getLevels()}initForm(){this.studentForm=this._formBuilder.group({name:[""],last_name:[""],representative_name:[""],representative_phone:[""],level_id:[""]})}getLevels(){this._studentsService.getAllLevels().subscribe(e=>{this.levels=e.data})}getStudent(){this._studentsService.get(this.studentID).subscribe(e=>{this.studentForm.patchValue(e.data)})}createStudent(){this.studentForm.invalid?this.studentForm.markAllAsTouched():(this.studentForm.disable(),this.studentForm.updateValueAndValidity(),this.showAlert=!1,this._studentsService.create(this.studentForm.value).pipe().subscribe(()=>{this.studentForm.enable(),this._router.navigate(["/alumnos/lista",{m:1}])},e=>{this.studentForm.enable(),e.message===this._globalService.httpValidationErrorMessage&&(this.studentForm=this._globalService.getValidationErrors(this.studentForm,e),this.alert={type:"error",message:`${e.message}`},this.showAlert=!0)}))}updateStudent(){this.studentForm.markAllAsTouched(),!this.studentForm.invalid&&(this.studentForm.disable(),this.showAlert=!1,this._studentsService.update(this.studentID,this.studentForm.value).pipe().subscribe(()=>{this.studentForm.enable(),this._router.navigate(["/alumnos/lista",{m:2}])},e=>{this.studentForm.enable(),e.message===this._globalService.httpValidationErrorMessage&&(this.studentForm=this._globalService.getValidationErrors(this.studentForm,e),this.alert={type:"error",message:`${e.message}`},this.showAlert=!0)}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.U),t.Y36(d.gz),t.Y36(m.qu),t.Y36(d.F0),t.Y36(C),t.Y36(st.R))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-manage-student"]],decls:52,vars:14,consts:[[1,"w-full","max-w-3xl","m-auto"],[1,"grid","sm:grid-cols-2","gap-8","w-full","mb-8"],[1,"w-full","col-span-1"],[1,"text-3xl","font-bold"],[1,"text-secondary"],[1,"w-full","col-span-1",3,"formGroup"],[1,"col-span-1","relative"],[1,"absolute","-translate-y-2/4","top-2/4","left-0","right-0"],[3,"appearance","showIcon","type",4,"ngIf"],[1,"grid","sm:grid-cols-2","gap-y-1","gap-x-5","w-full","mt-8",3,"formGroup"],[1,"col-span-1"],[1,"w-full"],["id","name","type","text","formControlName","name","matInput",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["id","last_name","type","text","formControlName","last_name","matInput",""],["id","representative_name","type","text","formControlName","representative_name","matInput",""],["id","representative_phone","type","text","formControlName","representative_phone","matInput",""],[1,"col-span-2"],["formControlName","level_id"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-11","mb-10","border-t"],[1,"flex","items-center","justify-end"],["mat-flat-button","","type","button",1,"ml-4",3,"color","click"],[3,"appearance","showIcon","type"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"form")(2,"div",1)(3,"div",2)(4,"div",3),t._uU(5,"Crear Alumno"),t.qZA(),t.TgZ(6,"div",4),t._uU(7,"Ingresa la informacion para crear un alumno"),t.qZA()(),t._UZ(8,"div",5),t.TgZ(9,"div",6)(10,"div",7),t.YNc(11,mt,2,5,"fuse-alert",8),t.qZA()()(),t.TgZ(12,"div",9)(13,"div",10)(14,"mat-form-field",11)(15,"mat-label"),t._uU(16,"Nombres"),t.qZA(),t._UZ(17,"input",12),t.YNc(18,ut,2,0,"mat-error",13),t.YNc(19,pt,2,0,"mat-error",13),t.YNc(20,dt,2,1,"mat-error",14),t.qZA()(),t.TgZ(21,"div",10)(22,"mat-form-field",11)(23,"mat-label"),t._uU(24,"Apellidos"),t.qZA(),t._UZ(25,"input",15),t.YNc(26,_t,2,0,"mat-error",13),t.YNc(27,gt,2,0,"mat-error",13),t.YNc(28,ht,2,1,"mat-error",14),t.qZA()(),t.TgZ(29,"div",10)(30,"mat-form-field",11)(31,"mat-label"),t._uU(32,"Representante"),t.qZA(),t._UZ(33,"input",16),t.YNc(34,Zt,2,1,"mat-error",14),t.qZA()(),t.TgZ(35,"div",10)(36,"mat-form-field",11)(37,"mat-label"),t._uU(38,"Telefono representante"),t.qZA(),t._UZ(39,"input",17),t.YNc(40,Ct,2,1,"mat-error",14),t.qZA()(),t.TgZ(41,"div",18)(42,"mat-form-field",11)(43,"mat-label"),t._uU(44,"Grado"),t.qZA(),t.TgZ(45,"mat-select",19),t.YNc(46,xt,2,2,"mat-option",20),t.qZA(),t.YNc(47,bt,2,1,"mat-error",14),t.qZA()()(),t._UZ(48,"div",21),t.TgZ(49,"div",22)(50,"button",23),t.NdJ("click",function(){return o.studentID?o.updateStudent():o.createStudent()}),t._uU(51,"Guardar "),t.qZA()()()()),2&e&&(t.xp6(8),t.Q6J("formGroup",o.studentForm),t.xp6(3),t.Q6J("ngIf",o.showAlert),t.xp6(1),t.Q6J("formGroup",o.studentForm),t.xp6(6),t.Q6J("ngIf",o.studentForm.get("name").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.studentForm.get("name").hasError("name")),t.xp6(1),t.Q6J("ngForOf",o._globalService.errorsLength(o.studentForm.get("name"))),t.xp6(6),t.Q6J("ngIf",o.studentForm.get("last_name").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.studentForm.get("last_name").hasError("last_name")),t.xp6(1),t.Q6J("ngForOf",o._globalService.errorsLength(o.studentForm.get("last_name"))),t.xp6(6),t.Q6J("ngForOf",o._globalService.errorsLength(o.studentForm.get("representative_name"))),t.xp6(6),t.Q6J("ngForOf",o._globalService.errorsLength(o.studentForm.get("representative_phone"))),t.xp6(6),t.Q6J("ngForOf",o.levels),t.xp6(1),t.Q6J("ngForOf",o._globalService.errorsLength(o.studentForm.get("level_id"))),t.xp6(3),t.Q6J("color","primary"))},dependencies:[g.sg,g.O5,_.TO,_.KE,_.hX,f.Nt,y.gD,A.ey,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,m.F,Z.lW]}),n})();var h=s(7340),G=s(269);let At=(()=>{class n{constructor(e,o,i,r,l){this._formBuilder=e,this._studentsService=o,this._globalService=i,this._activatedRoute=r,this._paymentControlService=l,this.documentTypeEnrollmentFG=new m.NI,this.enrollmentFG=this._formBuilder.group({full_name:[],document:[],month:[],year:[],ves_amount:[],usd_amount:[],payment_date:[],payment_method:[],reference_number:[],payer_type:[]}),this._paymentControlService.getEnrollmentFees().subscribe(p=>{this.enrollmentFee=p.data[0].amount_usd,this.getBCV()}),this._activatedRoute.params.subscribe(p=>{p.id&&(this.estudianteID=p.id,this.getEnrollmentPaymentData())}),this.enrollmentFG.get("payer_type").valueChanges.subscribe(p=>{this.documentTypeEnrollmentFG.setValue("Natural"===p?"V":"J")})}getBCV(){this._paymentControlService.getDolarBCV().subscribe(e=>{this.dolarBCV=e.data,this.enrollmentFG.get("usd_amount").setValue(this.enrollmentFee,{emitEvent:!1}),this.enrollmentFG.get("ves_amount").setValue(this.enrollmentFee*this.dolarBCV,{emitEvent:!1})})}getEnrollmentPaymentData(){this._studentsService.getEnrollmentPayments(this.estudianteID).subscribe(e=>{this.paymentEnrollmentData=e.data,this.enrollmentFG.patchValue(this.paymentEnrollmentData),console.log(this.paymentEnrollmentData)})}ngOnInit(){}regiterPaymentEnrollment(){this._studentsService.registerEnrollmentPayment(this.estudianteID,this.enrollmentFG.value).subscribe(e=>{this._globalService.openSnackBar("Pago de inscripci\xf3n guardado exitosamente",2e3,"success")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.qu),t.Y36(C),t.Y36(x.U),t.Y36(d.gz),t.Y36(G.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-payment-control-enrollment"]],decls:0,vars:0,template:function(e,o){},encapsulation:2}),n})();var S=s(1948),F=s(3848),U=s(9602);function St(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"creado"),t.qZA())}function Ft(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"actualizado"),t.qZA())}function Ut(n,a){if(1&n&&(t.TgZ(0,"fuse-alert",61)(1,"span",62),t._uU(2,"Exito"),t.qZA(),t._uU(3," El alumno ha sido "),t.YNc(4,St,2,0,"span",63),t.YNc(5,Ft,2,0,"span",63),t._uU(6," exitosamente "),t.qZA()),2&n){const e=t.oxw();t.Q6J("type","success"),t.xp6(4),t.Q6J("ngIf","1"===e.m),t.xp6(1),t.Q6J("ngIf","2"===e.m)}}function qt(n,a){if(1&n&&(t.TgZ(0,"mat-option",64),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Nt(n,a){if(1&n&&(t.TgZ(0,"mat-option",64),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",a.index),t.xp6(1),t.Oqu(e)}}function Pt(n,a){1&n&&(t.TgZ(0,"mat-label"),t._uU(1,"Nombres y Apellidos"),t.qZA())}function wt(n,a){1&n&&(t.TgZ(0,"mat-label"),t._uU(1,"Razon social"),t.qZA())}function Jt(n,a){1&n&&(t.TgZ(0,"mat-option",82),t._uU(1,"V"),t.qZA())}function Yt(n,a){1&n&&(t.TgZ(0,"mat-option",83),t._uU(1,"E"),t.qZA())}function Dt(n,a){1&n&&(t.TgZ(0,"mat-option",84),t._uU(1,"J"),t.qZA())}function Gt(n,a){1&n&&(t.TgZ(0,"mat-option",85),t._uU(1,"P"),t.qZA())}function Qt(n,a){1&n&&(t.TgZ(0,"mat-option",86),t._uU(1,"G"),t.qZA())}function Mt(n,a){1&n&&(t.TgZ(0,"mat-label"),t._uU(1,"Cedula de Identidad"),t.qZA())}function It(n,a){1&n&&(t.TgZ(0,"mat-label"),t._uU(1,"RIF"),t.qZA())}function Et(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"div",22)(2,"mat-form-field",0),t.YNc(3,Pt,2,0,"mat-label",63),t.YNc(4,wt,2,0,"mat-label",63),t._UZ(5,"input",65),t.qZA()(),t.TgZ(6,"div",22)(7,"div",23)(8,"div",22)(9,"mat-form-field",0),t._UZ(10,"mat-label"),t.TgZ(11,"mat-select",39),t.YNc(12,Jt,2,0,"mat-option",66),t.YNc(13,Yt,2,0,"mat-option",67),t.YNc(14,Dt,2,0,"mat-option",68),t.YNc(15,Gt,2,0,"mat-option",69),t.YNc(16,Qt,2,0,"mat-option",70),t.qZA()()(),t.TgZ(17,"div",36)(18,"mat-form-field",0),t.YNc(19,Mt,2,0,"mat-label",63),t.YNc(20,It,2,0,"mat-label",63),t._UZ(21,"input",71),t.qZA()()()(),t.TgZ(22,"div",22)(23,"mat-form-field",0)(24,"mat-label"),t._uU(25,"Metodo de pago"),t.qZA(),t.TgZ(26,"mat-select",72)(27,"mat-option",73),t._uU(28,"Transferencia Bancaria"),t.qZA(),t.TgZ(29,"mat-option",74),t._uU(30,"Pago movil"),t.qZA(),t.TgZ(31,"mat-option",75),t._uU(32,"Efectivo"),t.qZA(),t.TgZ(33,"mat-option",76),t._uU(34,"Cheque"),t.qZA(),t.TgZ(35,"mat-option",77),t._uU(36,"Biopago"),t.qZA(),t.TgZ(37,"mat-option",78),t._uU(38,"Punto de venta"),t.qZA()()()(),t.TgZ(39,"div",22)(40,"mat-form-field",0)(41,"mat-label"),t._uU(42,"Numero de referencia"),t.qZA(),t._UZ(43,"input",79),t.qZA()(),t.TgZ(44,"div",80)(45,"div")(46,"button",81),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.regiterPayment())}),t._uU(47,"Registrar mensualidad"),t.qZA()()()()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.paymentFG),t.xp6(3),t.Q6J("ngIf","Natural"===e.paymentFG.get("payer_type").value),t.xp6(1),t.Q6J("ngIf","Juridico"===e.paymentFG.get("payer_type").value),t.xp6(7),t.Q6J("formControl",e.documentTypeFC),t.xp6(1),t.Q6J("ngIf","Natural"===e.paymentFG.get("payer_type").value),t.xp6(1),t.Q6J("ngIf","Natural"===e.paymentFG.get("payer_type").value),t.xp6(1),t.Q6J("ngIf","Juridico"===e.paymentFG.get("payer_type").value),t.xp6(1),t.Q6J("ngIf","Juridico"===e.paymentFG.get("payer_type").value),t.xp6(1),t.Q6J("ngIf","Juridico"===e.paymentFG.get("payer_type").value),t.xp6(3),t.Q6J("ngIf","Natural"===e.paymentFG.get("payer_type").value),t.xp6(1),t.Q6J("ngIf","Juridico"===e.paymentFG.get("payer_type").value)}}function Vt(n,a){if(1&n&&(t.TgZ(0,"mat-option",64),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Bt(n,a){1&n&&(t.TgZ(0,"th",87),t._uU(1,"Mes"),t.qZA())}function Lt(n,a){if(1&n&&(t.TgZ(0,"td",88)(1,"span",89),t._uU(2),t.qZA()()),2&n){const e=a.$implicit,o=t.oxw();t.xp6(2),t.hij(" ",o.months[e.month]," ")}}function kt(n,a){1&n&&(t.TgZ(0,"th",87),t._uU(1,"Estado"),t.qZA())}function Ot(n,a){1&n&&(t.TgZ(0,"span",93),t._uU(1,"Pendiente"),t.qZA())}function $t(n,a){1&n&&(t.TgZ(0,"span",94),t._uU(1,"Parcial"),t.qZA())}function Rt(n,a){1&n&&(t.TgZ(0,"span",95),t._uU(1,"Pagado"),t.qZA())}function jt(n,a){if(1&n&&(t.TgZ(0,"td",88)(1,"span",89),t.YNc(2,Ot,2,0,"span",90),t.YNc(3,$t,2,0,"span",91),t.YNc(4,Rt,2,0,"span",92),t.qZA()()),2&n){const e=a.$implicit,o=t.oxw();t.xp6(2),t.Q6J("ngIf",0==o.getPaymentSum(e)),t.xp6(1),t.Q6J("ngIf",o.getPaymentSum(e)<o.currentMonthPrice&&o.getPaymentSum(e)>0),t.xp6(1),t.Q6J("ngIf",o.getPaymentSum(e)==o.currentMonthPrice)}}function zt(n,a){1&n&&(t.TgZ(0,"th",87),t._uU(1,"Monto Abonado (USD)"),t.qZA())}function Ht(n,a){if(1&n&&(t.TgZ(0,"td",88)(1,"span",89),t._uU(2),t.qZA()()),2&n){const e=a.$implicit,o=t.oxw();t.xp6(2),t.hij(" ",o.getPaymentSum(e)||0," USD ")}}function Xt(n,a){1&n&&(t.TgZ(0,"th",87),t._uU(1,"Pagos realizados"),t.qZA())}function Kt(n,a){if(1&n&&(t.TgZ(0,"td",88)(1,"span",89),t._uU(2),t.qZA()()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",e.payments.length||0," ")}}function Wt(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"mat-icon",100),t._uU(13,"delete"),t.qZA()()()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(e.full_name?e.full_name:"-"),t.xp6(2),t.Oqu(e.payment_date?e.payment_date:"-"),t.xp6(2),t.Oqu(e.ves_amount?e.ves_amount:"-"),t.xp6(2),t.Oqu(e.usd_amount?e.usd_amount:"-"),t.xp6(2),t.Oqu(e.reference_number?e.reference_number:"-")}}function te(n,a){if(1&n&&(t.TgZ(0,"td",88)(1,"div",96)(2,"div",97)(3,"table",98)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"Pagador"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Fecha de pago"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Monto de pago (VES)"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Monto de pago (USD)"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Referencia"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Acci\xf3n"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,Wt,14,5,"tr",99),t.qZA()()()()()),2&n){const e=a.$implicit,o=t.oxw();t.uIk("colspan",o.columns.length),t.xp6(1),t.Q6J("@detailExpand",e==o.expandedElement?"expanded":"collapsed"),t.xp6(18),t.Q6J("ngForOf",e.payments)}}function ee(n,a){1&n&&t._UZ(0,"tr",101)}function ne(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr",102),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.expandedElement=l.expandedElement===r?null:r)}),t.qZA()}if(2&n){const e=a.$implicit,o=t.oxw();t.ekj("example-expanded-row",o.expandedElement===e)}}function oe(n,a){1&n&&t._UZ(0,"tr",103)}function ae(n,a){1&n&&(t.TgZ(0,"mat-label"),t._uU(1,"Nombres y Apellidos"),t.qZA())}function ie(n,a){1&n&&(t.TgZ(0,"mat-label"),t._uU(1,"Razon social"),t.qZA())}function re(n,a){1&n&&(t.TgZ(0,"mat-option",82),t._uU(1,"V"),t.qZA())}function le(n,a){1&n&&(t.TgZ(0,"mat-option",83),t._uU(1,"E"),t.qZA())}function se(n,a){1&n&&(t.TgZ(0,"mat-option",84),t._uU(1,"J"),t.qZA())}function me(n,a){1&n&&(t.TgZ(0,"mat-option",85),t._uU(1,"P"),t.qZA())}function ue(n,a){1&n&&(t.TgZ(0,"mat-option",86),t._uU(1,"G"),t.qZA())}function pe(n,a){1&n&&(t.TgZ(0,"mat-label"),t._uU(1,"Cedula de Identidad"),t.qZA())}function ce(n,a){1&n&&(t.TgZ(0,"mat-label"),t._uU(1,"RIF"),t.qZA())}function de(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"div",22)(2,"mat-form-field",0),t.YNc(3,ae,2,0,"mat-label",63),t.YNc(4,ie,2,0,"mat-label",63),t._UZ(5,"input",65),t.qZA()(),t.TgZ(6,"div",22)(7,"div",23)(8,"div",22)(9,"mat-form-field",0),t._UZ(10,"mat-label"),t.TgZ(11,"mat-select",39),t.YNc(12,re,2,0,"mat-option",66),t.YNc(13,le,2,0,"mat-option",67),t.YNc(14,se,2,0,"mat-option",68),t.YNc(15,me,2,0,"mat-option",69),t.YNc(16,ue,2,0,"mat-option",70),t.qZA()()(),t.TgZ(17,"div",36)(18,"mat-form-field",0),t.YNc(19,pe,2,0,"mat-label",63),t.YNc(20,ce,2,0,"mat-label",63),t._UZ(21,"input",71),t.qZA()()()(),t.TgZ(22,"div",22)(23,"mat-form-field",0)(24,"mat-label"),t._uU(25,"Metodo de pago"),t.qZA(),t.TgZ(26,"mat-select",72)(27,"mat-option",73),t._uU(28,"Transferencia Bancaria"),t.qZA(),t.TgZ(29,"mat-option",74),t._uU(30,"Pago movil"),t.qZA(),t.TgZ(31,"mat-option",75),t._uU(32,"Efectivo"),t.qZA(),t.TgZ(33,"mat-option",76),t._uU(34,"Cheque"),t.qZA(),t.TgZ(35,"mat-option",77),t._uU(36,"Biopago"),t.qZA(),t.TgZ(37,"mat-option",78),t._uU(38,"Punto de venta"),t.qZA()()()(),t.TgZ(39,"div",22)(40,"mat-form-field",0)(41,"mat-label"),t._uU(42,"Numero de referencia"),t.qZA(),t._UZ(43,"input",79),t.qZA()(),t.TgZ(44,"div",80)(45,"div")(46,"button",81),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.regiterPaymentEnrollment())}),t._uU(47,"Guardar informaci\xf3n de inscripci\xf3n"),t.qZA()()()()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.enrollmentFG),t.xp6(3),t.Q6J("ngIf","Natural"===e.enrollmentFG.get("payer_type").value),t.xp6(1),t.Q6J("ngIf","Juridico"===e.enrollmentFG.get("payer_type").value),t.xp6(7),t.Q6J("formControl",e.documentTypeEnrollmentFG),t.xp6(1),t.Q6J("ngIf","Natural"===e.enrollmentFG.get("payer_type").value),t.xp6(1),t.Q6J("ngIf","Natural"===e.enrollmentFG.get("payer_type").value),t.xp6(1),t.Q6J("ngIf","Juridico"===e.enrollmentFG.get("payer_type").value),t.xp6(1),t.Q6J("ngIf","Juridico"===e.enrollmentFG.get("payer_type").value),t.xp6(1),t.Q6J("ngIf","Juridico"===e.enrollmentFG.get("payer_type").value),t.xp6(3),t.Q6J("ngIf","Natural"===e.enrollmentFG.get("payer_type").value),t.xp6(1),t.Q6J("ngIf","Juridico"===e.enrollmentFG.get("payer_type").value)}}const _e=function(){return["expandedDetail"]},ge=[{path:"lista",component:lt},{path:"crear",component:D},{path:"editar/:id",component:D},{path:"control-de-pago/:id",component:(()=>{class n extends At{constructor(e,o,i,r,l,p,Ce){super(r,e,l,o,p),this._studentsService=e,this._activatedRoute=o,this._router=i,this._formBuilder=r,this._globalService=l,this._paymentControlService=p,this._fuseConfirmationService=Ce,this.columns=["mes","estado","pagador","fecha_pago"],this.m=null,this._unsubscribeAll=new P.x,this.yearFC=new m.NI,this.currentDate=new Date,this.documentTypeFC=new m.NI,this.months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],this.abonatedVESFC=new m.NI,this.abonatedUSDFC=new m.NI}ngOnInit(){this.paymentData=[];for(let e=0;e<12;e++)this.paymentData.push({month:e,debt:0,payments:[]});this._paymentControlService.getDolarBCV().subscribe(e=>{this.dolarBCV=e.data}),this._paymentControlService.getMonthPrice().subscribe(e=>{this.currentMonthPrice=e.data,this.amountValidation=e.data,this.paymentData=this.paymentData.map(o=>({...o,debt:this.amountValidation}))}),this._paymentControlService.getYears().subscribe(e=>{const o=e.data.map(i=>i.year);this.years=o.filter((i,r)=>o.indexOf(i)===r),this.yearFC.setValue((new Date).getFullYear(),{emitEvent:!1})}),this.paymentFG=this._formBuilder.group({full_name:[],document:[],month:[],year:[],ves_amount:[],usd_amount:[],payment_date:[],payment_method:[],reference_number:[],payer_type:[]}),this.paymentFG.get("ves_amount").valueChanges.subscribe(e=>{let o=parseFloat((e/this.dolarBCV).toFixed(2));o>this.amountValidation&&(o=this.amountValidation,this.paymentFG.get("ves_amount").setValue(this.amountValidation*this.dolarBCV,{emitEvent:!1})),this.paymentFG.get("usd_amount").setValue(o,{emitEvent:!1})}),this.paymentFG.get("usd_amount").valueChanges.subscribe(e=>{let o=parseFloat((e*this.dolarBCV).toFixed(2));o>this.amountValidation*this.dolarBCV&&(o=this.amountValidation*this.dolarBCV,this.paymentFG.get("usd_amount").setValue(this.amountValidation,{emitEvent:!1})),this.paymentFG.get("ves_amount").setValue(o,{emitEvent:!1})}),this.paymentFG.get("year").valueChanges.subscribe(e=>{this.amountValidation=this.currentMonthPrice,e===this.yearFC.value&&this.paymentFG.get("month").value&&(this.amountValidation=this.paymentData.find(o=>o.month===this.paymentFG.get("month").value).debt)}),this.paymentFG.get("month").valueChanges.subscribe(e=>{this.amountValidation=this.currentMonthPrice,this.paymentFG.get("year").value===this.yearFC.value&&e&&(this.amountValidation=this.paymentData.find(o=>o.month===e).debt)}),this.paymentFG.get("payer_type").valueChanges.subscribe(e=>{this.documentTypeFC.setValue("Natural"===e?"V":"J")}),this.paymentFG.get("payer_type").setValue("Natural"),this.seachFormGroup=this._formBuilder.group({file:[null],city:[null],company:[null],profession:[null],fileSelect:["Seleccionar"],citySelect:["Seleccionar"],companySelect:["Seleccionar"],professionSelect:["Seleccionar"]}),this._activatedRoute.params.pipe((0,w.R)(this._unsubscribeAll)).subscribe(e=>{e.m&&(this.m=e.m),e.id&&(this.studentID=e.id,this.getPaymentData((new Date).getFullYear()))}),this.yearFC.valueChanges.subscribe(e=>{this.getPaymentData(e)})}getPaymentData(e){this._studentsService.getPayments(this.studentID,e).subscribe(o=>{this.paymentData=this.paymentData.map((i,r)=>(console.log(o.data.filter(l=>l.month===r+1)),{...i,debt:o.data.filter(l=>l.month===r+1).reduce((l,p)=>l-p.usd_amount,i.debt),payments:o.data.filter(l=>l.month===r+1)})),console.log(this.paymentData)})}filter(e,o){const i=e.toLowerCase();return o.filter(r=>(r||"").toLowerCase().includes(i))}regiterPayment(){this._studentsService.registerPayment(this.studentID,this.paymentFG.value).subscribe(e=>{this._globalService.openSnackBar("Pago registrado",2e3,"success"),this.yearFC.value==(new Date).getFullYear()&&(this.paymentData=this.paymentData.map((o,i)=>o.month===this.paymentFG.get("month").value?{...o,debt:o.debt-this.paymentFG.get("usd_amount").value,payments:[...o.payments,e.data]}:o),this.paymentFG.reset(),this.paymentFG.get("payer_type").setValue("Natural"))})}goToStudent(e){this._router.navigate(["alumnos","editar",e])}goToPaymentControl(e){this._router.navigate(["alumnos","control-de-pago",e])}resendSignUpEmail(e){this._studentsService.resendSignUpEmail(e).subscribe(o=>{this._globalService.openSnackBar("Correo enviado",5e3,"success"),console.log(o)})}openDialog(e){this._fuseConfirmationService.open({title:"Atenci\xf3n",message:"\xbfEst\xe1 seguro que desea eliminar este pago?. Esta acci\xf3n no se puede deshacer.",icon:{show:!0,name:"heroicons_outline:exclamation",color:"warning"},actions:{confirm:{show:!0,label:"Confirmar",color:"accent"},cancel:{show:!0,label:"Cancelar"}},dismissible:!0}).afterClosed().subscribe(i=>{"confirmed"===i&&this._paymentControlService.delete(e).subscribe(r=>{this._globalService.openSnackBar("Alumno eliminado",5e3,"success"),this.getPaymentData(this.yearFC.value)})})}getPaymentSum(e){return e.payments.reduce((o,i)=>o+i.usd_amount,0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C),t.Y36(d.gz),t.Y36(d.F0),t.Y36(m.qu),t.Y36(x.U),t.Y36(G.s),t.Y36(J.R))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-payment-control"]],features:[t.qOj],decls:167,vars:32,consts:[[1,"w-full"],[1,"grid","sm:grid-cols-2","gap-8","w-full","mb-6"],[1,"w-full","col-span-1"],[1,"text-3xl","font-bold"],[1,"text-secondary"],[1,"text-right"],[1,"w-18","text-center",2,"margin-left","auto"],["src","/assets/bcv.png","alt","",1,"w-full"],[1,"mt-1"],[3,"type",4,"ngIf"],["mat-stretch-tabs","false","mat-align-tabs","start"],["label","Pago mensualidades"],[1,"sm:col-span-6","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden","mb-5"],[1,"grid","grid-cols-12","mb-7"],[1,"col-span-6"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"w-fit","ml-auto",3,"formGroup"],[1,"mb-2"],["formControlName","payer_type","aria-label","Select an option"],["value","Natural",2,"margin-right","20px"],["value","Juridico"],[1,"grid","grid-cols-12","gap-5",3,"formGroup"],[1,"col-span-3"],[1,"grid","grid-cols-12","gap-2"],[1,"col-span-5"],["formControlName","year"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-7"],["formControlName","month"],["formControlName","ves_amount","id","name","type","text","matInput","","disabled",""],["formControlName","usd_amount","id","name","type","text","matInput","","disabled",""],["formControlName","payment_date","matInput","",3,"value","matDatepicker","click"],["picker",""],["class","grid grid-cols-12 gap-5",3,"formGroup",4,"ngIf"],[1,"sm:col-span-6","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"grid","grid-cols-12"],[1,"col-span-9"],[1,"flex","gap-3","justify-end",3,"formGroup"],[1,"w-2/5"],[3,"formControl"],[1,"flex","flex-col","flex-auto","mt-2","overflow-x-auto"],["mat-table","","multiTemplateDataRows","",1,"min-w-240","overflow-y-visible",3,"dataSource"],["matColumnDef","mes"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","estado"],["matColumnDef","pagador"],["matColumnDef","fecha_pago"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["class","cursor-pointer","mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["label","Pago inscripci\xf3n"],[1,"my-5"],[1,"max-w-100","mx-auto","text-center"],[1,""],[1,"my-4"],[1,"col-span-4"],["formControlName","ves_amount","id","name","type","text","matInput",""],["formControlName","usd_amount","id","name","type","text","matInput",""],["picker2",""],[3,"type"],["fuseAlertTitle",""],[4,"ngIf"],[3,"value"],["formControlName","full_name","id","name","type","text","matInput",""],["value","V",4,"ngIf"],["value","E",4,"ngIf"],["value","J",4,"ngIf"],["value","P",4,"ngIf"],["value","G",4,"ngIf"],["formControlName","document","id","name","type","text","matInput",""],["formControlName","payment_method"],["value","Transferencia bancaria"],["value","Pago movil"],["value","Efectivo"],["value","Cheque"],["value","Biopago"],["value","Punto de venta"],["formControlName","reference_number","id","name","type","text","matInput",""],[1,"col-span-12"],["mat-stroked-button","",1,"rounded","w-full","p-0","bg-primary-300","text-on-primary-300",3,"click"],["value","V"],["value","E"],["value","J"],["value","P"],["value","G"],["mat-header-cell",""],["mat-cell",""],[1,"font-medium"],["class","text-red-600",4,"ngIf"],["class","text-yellow-600",4,"ngIf"],["class","text-green-600",4,"ngIf"],[1,"text-red-600"],[1,"text-yellow-600"],[1,"text-green-600"],[1,"example-element-detail","w-full"],[1,"w-full",2,"padding","13px 10px 30px"],[1,"simple-table"],[4,"ngFor","ngForOf"],[1,"text-red-800","cursor-pointer"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"]],template:function(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"Control de pagos"),t.qZA(),t.TgZ(5,"div",4),t._uU(6,"Gestiona la informacion de pago para el alumno: "),t.TgZ(7,"strong"),t._uU(8,"Jos\xe9 Andres Hernandez"),t.qZA()()(),t.TgZ(9,"div",2)(10,"div",5)(11,"div",6),t._UZ(12,"img",7),t.TgZ(13,"div",8),t._uU(14),t.qZA()()()(),t.TgZ(15,"div",2),t.YNc(16,Ut,7,3,"fuse-alert",9),t.qZA()(),t.TgZ(17,"mat-tab-group",10)(18,"mat-tab",11)(19,"div",12)(20,"div",13)(21,"div",14)(22,"div",15),t._uU(23,"Registrar pago de mensualidad"),t.qZA(),t.TgZ(24,"div"),t._uU(25,"Valor de mensualidad (USD): "),t.TgZ(26,"strong"),t._uU(27),t.qZA()(),t.TgZ(28,"div"),t._uU(29,"Valor de mensualidad (VES): "),t.TgZ(30,"strong"),t._uU(31),t.ALo(32,"number"),t.qZA()()(),t.TgZ(33,"div",14)(34,"div",16)(35,"div",17)(36,"strong"),t._uU(37,"Entidad que realiza el pago"),t.qZA()(),t.TgZ(38,"mat-radio-group",18)(39,"mat-radio-button",19),t._uU(40,"Persona Natural"),t.qZA(),t.TgZ(41,"mat-radio-button",20),t._uU(42,"Entidad Juridica"),t.qZA()()()()(),t.TgZ(43,"div",21)(44,"div",22)(45,"div",23)(46,"div",24)(47,"mat-form-field",0)(48,"mat-label"),t._uU(49,"A\xf1o"),t.qZA(),t.TgZ(50,"mat-select",25),t.YNc(51,qt,2,2,"mat-option",26),t.qZA()()(),t.TgZ(52,"div",27)(53,"mat-form-field",0)(54,"mat-label"),t._uU(55,"Mes"),t.qZA(),t.TgZ(56,"mat-select",28),t.YNc(57,Nt,2,2,"mat-option",26),t.qZA()()()()(),t.TgZ(58,"div",22)(59,"mat-form-field",0)(60,"mat-label"),t._uU(61,"Monto Abonado (VES)"),t.qZA(),t._UZ(62,"input",29),t.qZA()(),t.TgZ(63,"div",22)(64,"mat-form-field",0)(65,"mat-label"),t._uU(66,"Monto Abonado (USD)"),t.qZA(),t._UZ(67,"input",30),t.qZA()(),t.TgZ(68,"div",22)(69,"mat-form-field",0)(70,"mat-label"),t._uU(71,"Fecha de abono"),t.qZA(),t.TgZ(72,"input",31),t.NdJ("click",function(){t.CHM(i);const l=t.MAs(76);return t.KtG(l.open())}),t.qZA(),t.TgZ(73,"mat-hint"),t._uU(74,"MM/DD/YYYY"),t.qZA(),t._UZ(75,"mat-datepicker",null,32),t.qZA()()(),t.YNc(77,Et,48,11,"div",33),t.qZA(),t.TgZ(78,"div",34)(79,"div",35)(80,"div",22)(81,"div",15),t._uU(82,"Detalles de alumno"),t.qZA()(),t.TgZ(83,"div",36)(84,"div",37)(85,"div",38)(86,"mat-form-field",0)(87,"mat-label"),t._uU(88,"A\xf1o de gestion"),t.qZA(),t.TgZ(89,"mat-select",39),t.YNc(90,Vt,2,2,"mat-option",26),t.qZA()()()()()(),t.TgZ(91,"div",40)(92,"table",41),t.ynx(93,42),t.YNc(94,Bt,2,0,"th",43),t.YNc(95,Lt,3,1,"td",44),t.BQk(),t.ynx(96,45),t.YNc(97,kt,2,0,"th",43),t.YNc(98,jt,5,3,"td",44),t.BQk(),t.ynx(99,46),t.YNc(100,zt,2,0,"th",43),t.YNc(101,Ht,3,1,"td",44),t.BQk(),t.ynx(102,47),t.YNc(103,Xt,2,0,"th",43),t.YNc(104,Kt,3,1,"td",44),t.BQk(),t.ynx(105,48),t.YNc(106,te,20,3,"td",44),t.BQk(),t.YNc(107,ee,1,0,"tr",49),t.YNc(108,ne,1,2,"tr",50),t.YNc(109,oe,1,0,"tr",51),t.qZA()()()(),t.TgZ(110,"mat-tab",52)(111,"div",53)(112,"div",54)(113,"div"),t._uU(114,"Registro de pago de inscripcion del a\xf1o escolar "),t.TgZ(115,"strong"),t._uU(116,"2022-2024"),t.qZA(),t._uU(117," para el alumno "),t.TgZ(118,"strong"),t._uU(119,"Jose Hernandez"),t.qZA()()(),t.TgZ(120,"div",55)(121,"div",56)(122,"div",12)(123,"div",13)(124,"div",14)(125,"div",15),t._uU(126,"Registrar pago de inscripci\xf3n"),t.qZA(),t.TgZ(127,"div"),t._uU(128,"Valor de inscripci\xf3n (USD): "),t.TgZ(129,"strong"),t._uU(130),t.qZA()(),t.TgZ(131,"div"),t._uU(132,"Valor de inscripci\xf3n (VES): "),t.TgZ(133,"strong"),t._uU(134),t.ALo(135,"number"),t.qZA()()(),t.TgZ(136,"div",14)(137,"div",16)(138,"div",17)(139,"strong"),t._uU(140,"Entidad que realiza el pago"),t.qZA()(),t.TgZ(141,"mat-radio-group",18)(142,"mat-radio-button",19),t._uU(143,"Persona Natural"),t.qZA(),t.TgZ(144,"mat-radio-button",20),t._uU(145,"Entidad Juridica"),t.qZA()()()()(),t.TgZ(146,"div",21)(147,"div",57)(148,"mat-form-field",0)(149,"mat-label"),t._uU(150,"Monto Abonado (VES)"),t.qZA(),t._UZ(151,"input",58),t.qZA()(),t.TgZ(152,"div",57)(153,"mat-form-field",0)(154,"mat-label"),t._uU(155,"Monto Abonado (USD)"),t.qZA(),t._UZ(156,"input",59),t.qZA()(),t.TgZ(157,"div",57)(158,"mat-form-field",0)(159,"mat-label"),t._uU(160,"Fecha de abono"),t.qZA(),t.TgZ(161,"input",31),t.NdJ("click",function(){t.CHM(i);const l=t.MAs(165);return t.KtG(l.open())}),t.qZA(),t.TgZ(162,"mat-hint"),t._uU(163,"MM/DD/YYYY"),t.qZA(),t._UZ(164,"mat-datepicker",null,60),t.qZA()()(),t.YNc(166,de,48,11,"div",33),t.qZA()()()()()()()}if(2&e){const i=t.MAs(76),r=t.MAs(165);t.xp6(14),t.hij("",o.dolarBCV," Bs"),t.xp6(2),t.Q6J("ngIf",o.m),t.xp6(11),t.hij("",o.currentMonthPrice," USD"),t.xp6(4),t.hij("",t.xi3(32,25,o.currentMonthPrice*o.dolarBCV,"1.2-2")," VES"),t.xp6(3),t.Q6J("formGroup",o.paymentFG),t.xp6(9),t.Q6J("formGroup",o.paymentFG),t.xp6(8),t.Q6J("ngForOf",o.years),t.xp6(6),t.Q6J("ngForOf",o.months),t.xp6(15),t.Q6J("value",o.currentDate)("matDatepicker",i),t.xp6(5),t.Q6J("ngIf",o.paymentFG.get("payer_type").value),t.xp6(7),t.Q6J("formGroup",o.seachFormGroup),t.xp6(5),t.Q6J("formControl",o.yearFC),t.xp6(1),t.Q6J("ngForOf",o.years),t.xp6(2),t.Q6J("dataSource",o.paymentData),t.xp6(15),t.Q6J("matHeaderRowDef",o.columns),t.xp6(1),t.Q6J("matRowDefColumns",o.columns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(31,_e)),t.xp6(21),t.hij("",o.enrollmentFee," USD"),t.xp6(4),t.hij("",t.xi3(135,28,o.enrollmentFee*o.dolarBCV,"1.2-2")," VES"),t.xp6(3),t.Q6J("formGroup",o.enrollmentFG),t.xp6(9),t.Q6J("formGroup",o.enrollmentFG),t.xp6(15),t.Q6J("value",o.currentDate)("matDatepicker",r),t.xp6(5),t.Q6J("ngIf",o.enrollmentFG.get("payer_type").value)}},dependencies:[g.sg,g.O5,Z.lW,_.KE,_.bx,_.hX,y.gD,A.ey,m.Fj,m.JJ,m.JL,m.oH,m.sg,m.u,f.Nt,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,S.VQ,S.U0,Y.W,F.SP,F.uX,T.Hw,U.Mq,U.hl,g.JJ],styles:["tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:whitesmoke}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.example-element-diagram[_ngcontent-%COMP%]{min-width:80px;border:2px solid black;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}.simple-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-spacing:0;border:1px solid #ddd}.simple-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f5f5f5}.simple-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .simple-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd}"],data:{animation:[(0,h.X$)("detailExpand",[(0,h.SB)("collapsed",(0,h.oB)({height:"0px",minHeight:"0"})),(0,h.SB)("expanded",(0,h.oB)({height:"*"})),(0,h.eR)("expanded <=> collapsed",(0,h.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),n})()},{path:"",pathMatch:"full",redirectTo:"lista"}];var q=s(979),Q=s(6709);let fe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,_.lN,f.c,y.LD,m.UX,m.u5,Q.p9,Z.ot,q.c]}),n})();var M=s(7775),I=s(3231),E=s(266);let he=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,Z.ot,_.lN,y.LD,m.UX,d.Bz,m.u5,f.c,E.AV,f.c,u.p0,I.Co,M.fC,b.TU,q.c,T.Ps]}),n})();var ve=s(7937);let Ze=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,Z.ot,_.lN,y.LD,m.UX,d.Bz,m.u5,f.c,E.AV,f.c,u.p0,S.Fk,I.Co,M.fC,b.TU,F.Nh,q.c,T.Ps,U.FA,Q.p9,A.XK,ve.w]}),n})(),ye=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,d.Bz.forChild(ge),Ze,fe,he]}),n})()}}]);